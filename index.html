<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO и OG мета-теги будут вставлены здесь динамически -->
    <title>Web Development &amp; SEO Services in Tbilisi, Georgia | Digital Craft</title>
    

    <!-- ДОБАВЛЕННЫЙ СКРИПТ ДЛЯ КОРРЕКТНОЙ РАБОТЫ НА GITHUB PAGES -->
    <script>
      (function(){
        var redirect = sessionStorage.redirect;
        delete sessionStorage.redirect;
        if (redirect && redirect != location.pathname) {
          history.replaceState(null, null, (location.pathname.endsWith('/') ? location.pathname.slice(0, -1) : location.pathname) + redirect);
        }
      })();
    </script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
    
    <!-- ИЗМЕНЕНИЕ: Старые скрипты Firebase отсюда УДАЛЕНЫ. -->

    <style>
        /* --- Global Variables --- */
        :root {
            --color-bg: #030409;
            --color-text: #FFFFFF;
            --color-accent: #b8d8e8;
            --color-card: rgba(25, 29, 45, 0.4);
            --color-border: rgba(184, 216, 232, 0.2);
            --font-main: 'Inter', sans-serif;
            --header-height: 80px;
        }

        /* --- Base Styles --- */
        body { margin: 0; padding: 0; font-family: var(--font-main); background-color: var(--color-bg); color: var(--color-text); -webkit-font-smoothing: antialiased; overflow-x: hidden; line-height: 1.6; }
        h1, h2, h3, h4 { font-weight: 600; letter-spacing: 0.5px; }
        h2 { font-size: clamp(1.8rem, 1.5rem + 1.5vw, 2.5rem); }
        a { color: var(--color-accent); text-decoration: none; }
        
        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--color-bg); display: flex; justify-content: center; align-items: center; z-index: 10000; transition: opacity 0.5s ease-out; }
        #loader.hidden { opacity: 0; pointer-events: none; }

        .spinner { width: 50px; height: 50px; border: 3px solid var(--color-accent); border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        #custom-background-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            border: none;
            z-index: 0;
            display: none;
        }
        
        main { position: relative; z-index: 2; max-width: 1200px; margin: 0 auto; padding: 100px 30px; transition: opacity 0.5s ease-out, transform 0.5s ease-out; }
        body.nav-is-open main { opacity: 0; transform: translateY(20px); pointer-events: none; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s forwards;
        }
        
        .hero-contact-list {
            font-size: 0.8em;
            list-style: none;
            padding-left: 0;
            margin-top: 25px;
            line-height: 1.6;
        }
        
        section { margin-bottom: 120px; perspective: 1000px; }
        
        .floating-item {
            opacity: 0.5;
            transform: translateY(60px);
            transition: transform 1.2s cubic-bezier(0.2, 0.8, 0.2, 1), 
                        opacity 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        
        .floating-item.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .floating-item.is-above {
            opacity: 0.5;
            transform: translateY(-60px);
        }
        
        .animated-container {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .item-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; margin-top: 40px; }
        .item-card { 
            display: flex; 
            flex-direction: column; 
            background: var(--color-card); 
            border: 1px solid var(--color-border); 
            border-radius: 8px; 
            overflow: hidden; 
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .item-card:hover { transform: translateY(-10px) scale(1.02) !important; border-color: var(--color-accent); box-shadow: 0 10px 30px rgba(184, 216, 232, 0.3); }
        .item-card__image { aspect-ratio: 4 / 3; background: linear-gradient(135deg, rgba(184, 216, 232, 0.1), rgba(25, 29, 45, 0.7)); background-size: cover; background-position: center; opacity: 1; transition: opacity 0.8s ease-in-out; position: relative; overflow: hidden; }
        .item-card__content { padding: 25px; }
        .item-card h3 { margin: 0 0 10px; font-size: 1.3rem; transition: color 0.3s ease-out; color: var(--color-text); }
        .item-card:hover h3 { color: var(--color-accent); }
        .item-card .card-subtitle { display: block; margin-bottom: 15px; opacity: 0.8; font-size: 0.9rem; color: var(--color-text); }
        .item-card p { margin: 0; font-size: 1.05rem; opacity: 0.9; color: var(--color-text); }
        
        .menu-toggle { position: fixed; top: 30px; right: 30px; z-index: 1000; background: transparent; border: none; padding: 0; cursor: pointer; width: 30px; height: 24px; display: flex; flex-direction: column; justify-content: space-between; transition: transform 0.4s; }
        .menu-toggle:hover { transform: scale(1.1); }
        .menu-toggle .bar { background: #FFFFFF; height: 2px; width: 100%; transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1); transform-origin: right; }
        .menu-toggle.is-active .bar:nth-child(1) { transform: translateY(11px) rotate(-45deg); background: var(--color-accent); }
        .menu-toggle.is-active .bar:nth-child(2) { opacity: 0; }
        .menu-toggle.is-active .bar:nth-child(3) { transform: translateY(-11px) rotate(45deg); background: var(--color-accent); }
        .nav-overlay { position: fixed; top: 0; right: -100%; width: 400px; height: 100vh; background: var(--color-card); backdrop-filter: blur(10px); z-index: 999; transition: right 0.6s cubic-bezier(0.77, 0, 0.175, 1); overflow: hidden; }
        .nav-overlay.is-active { right: 0; }
        .nav-menu { padding: 100px 40px; list-style: none; margin: 0; }
        .nav-menu li { margin-bottom: 25px; opacity: 0; transform: translateX(30px); transition: all 0.4s ease-out; }
        .nav-overlay.is-active .nav-menu li { opacity: 1; transform: translateX(0); }
        .nav-menu li:nth-child(1) { transition-delay: 0.1s; } .nav-menu li:nth-child(2) { transition-delay: 0.2s; } .nav-menu li:nth-child(3) { transition-delay: 0.3s; } .nav-menu li:nth-child(4) { transition-delay: 0.4s; } .nav-menu li:nth-child(5) { transition-delay: 0.5s; } .nav-menu li:nth-child(6) { transition-delay: 0.6s; }
        .nav-menu a { color: var(--color-text); font-size: 1.8rem; position: relative; padding-bottom: 5px; transition: all 0.3s ease-out; }
        .nav-menu a:hover { color: var(--color-accent); transform: translateX(5px); }
        .nav-menu a::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 1px; background: var(--color-accent); transition: width 0.4s; }
        .nav-menu a:hover::after { width: 100%; }

        .hero { min-height: 90vh; display: flex; flex-direction: column; justify-content: center; }
        .hero h1 { font-size: clamp(2.5rem, 8vw, 4.5rem); margin: 0 0 20px; line-height: 1.1; font-weight: 700; text-shadow: 0 0 15px rgba(184, 216, 232, 0.4); opacity: 0; transform: translateY(20px); }
        .hero .hero-subtitle-container { opacity: 0; transform: translateY(20px); }
        .hero .hero-subtitle-container p { font-size: 1.4rem; max-width: 600px; margin-bottom: 0; }
        
        .detail-page-header { text-align: left; margin-bottom: 60px; }
        .detail-page-header h1 { font-size: clamp(2rem, 4vw, 3rem); margin: 0 0 20px; line-height: 1.1; font-weight: 700; text-shadow: 0 0 15px rgba(184, 216, 232, 0.4); }
        .detail-price { font-size: 1.2rem; color: var(--color-accent); letter-spacing: 1px; opacity: 0.9; }
        .detail-main-image { width: 100%; height: auto; max-height: 450px; border-radius: 8px; object-fit: cover; border: 1px solid var(--color-border); margin-bottom: 40px; }
        .detail-content { font-size: clamp(1.1rem, 1rem + 0.5vw, 1.25rem); opacity: 0.95; max-width: 800px; margin: 0 auto; }
        .detail-content p, .detail-content li { margin-bottom: 1.5em; }
        .detail-content b, .detail-content strong { color: var(--color-accent); font-weight: 600; }
        .detail-content a { text-decoration: underline; }
        
        /* ИЗМЕНЕНИЕ: Стили для заголовка похожих постов */
        #related-posts { margin-bottom: 60px; }
        #related-posts h2 {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        #related-posts .item-grid { margin-top: 20px; }
        
        .site-footer {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 20px 30px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.5);
            margin-top: -60px;
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
        }

        #admin-panel { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(3, 4, 9, 0.95); z-index: 10000; display: none; overflow-y: auto; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        #admin-panel.active { display: block; }
        .admin-container { display: flex; min-height: 100vh; }
        .admin-sidebar { width: 250px; background: rgba(25, 29, 45, 0.8); padding: 30px; border-right: 1px solid var(--color-border); position: sticky; top: 0; height: 100vh; }
        .admin-sidebar h3 { margin-top: 0; }
        .admin-sidebar ul { list-style: none; padding: 0; }
        .admin-sidebar ul li { margin-bottom: 10px; }
        .admin-content { flex: 1; padding: 40px; }
        .admin-tabs { list-style: none; padding: 0; }
        .admin-tab { padding: 10px 0; cursor: pointer; transition: all 0.3s; }
        .admin-tab.active { color: var(--color-accent); font-weight: bold; }
        .admin-tab:not(.active):hover { color: var(--color-accent); transform: translateX(5px); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        #admin-close-btn { position: absolute; top: 25px; right: 25px; background: none; border: none; color: var(--color-text); font-size: 2rem; cursor: pointer; transition: all 0.3s; line-height: 1; }
        #admin-close-btn:hover { color: var(--color-accent); transform: rotate(90deg); }
        .admin-section-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--color-border); padding-bottom: 15px; margin-bottom: 30px; }
        .admin-item { background: var(--color-card); padding: 20px; border-radius: 8px; border: 1px solid var(--color-border); margin-bottom: 20px; }
        .admin-item-content { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .admin-item-content h4 { margin: 15px 0 0; border-top: 1px solid var(--color-border); padding-top: 15px; color: var(--color-accent); }
        .admin-item label { font-size: 0.9rem; opacity: 0.8; margin-bottom: -10px; }
        .admin-item input, .admin-item textarea, .admin-item select { width: 100%; background: rgba(0,0,0,0.2); border: 1px solid var(--color-border); color: var(--color-text); padding: 10px; border-radius: 4px; font-family: inherit; font-size: 1rem; transition: all 0.3s; box-sizing: border-box; }
        .admin-item input:disabled, .admin-item textarea:disabled, .admin-item select:disabled { background: transparent; border-color: transparent; color: var(--color-text); padding-left: 0; -webkit-appearance: none; -moz-appearance: none; appearance: none; }
        .admin-item input:focus, .admin-item textarea:focus, .admin-item select:focus { border-color: var(--color-accent); background: rgba(0,0,0,0.4); }
        .admin-item textarea { min-height: 80px; resize: vertical; line-height: 1.6; }
        .admin-item-actions { display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end; }
        .admin-btn { padding: 8px 16px; border: 1px solid var(--color-accent); background: rgba(184, 216, 232, 0.1); color: var(--color-accent); border-radius: 4px; cursor: pointer; transition: all 0.3s; }
        .admin-btn:hover { background: rgba(184, 216, 232, 0.3); color: var(--color-text); }
        .admin-btn.delete-btn { border-color: #e57373; color: #e57373; }
        .admin-btn.delete-btn:hover { background: rgba(229, 115, 115, 0.3); color: var(--color-text); }
        .admin-btn.save-btn { display: none; }
        .admin-item.is-editing .edit-btn { display: none; }
        .admin-item.is-editing .save-btn { display: inline-block; }
        .admin-item.is-editing input, .admin-item.is-editing textarea, .admin-item.is-editing select { padding-left: 10px; }
        .admin-item.is-editing select { -webkit-appearance: menulist; -moz-appearance: menulist; appearance: menulist; }
        
        /* --- СТИЛИ ДЛЯ СЛАЙДЕРА (DISSOLVE/FADE) --- */
        .mobile-sliders-container { display: none; }
        .language-slider-block { margin-bottom: 30px; }
        .cross-fade-slider {
            position: relative;
            -webkit-tap-highlight-color: transparent;
            /* ИЗМЕНЕНИЕ: Плавная смена высоты контейнера */
            transition: height 0.5s ease-in-out;
        }
        .cross-fade-slider .item-card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            opacity: 0;
            z-index: 1;
            pointer-events: none;
            transition: opacity 0.7s ease-in-out;
            /* Отключаем hover-эффекты для слайдера */
            transform: none !important; 
        }
        .cross-fade-slider .item-card:hover { 
            transform: none !important; 
            box-shadow: none;
            border-color: var(--color-border);
        }
        .cross-fade-slider .item-card.active {
            opacity: 1;
            z-index: 2;
            pointer-events: auto;
        }
        .slider-nav { text-align: center; margin-top: 20px; position: relative; z-index: 3; }
        .slider-dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; background-color: var(--color-border); margin: 0 5px; cursor: pointer; transition: background-color 0.3s ease, transform 0.3s ease; }
        .slider-dot.active { background-color: var(--color-accent); transform: scale(1.2); }

        @media (prefers-reduced-motion: reduce) { *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; } .animated-container, .floating-item { opacity: 1; transform: none; transition: none; } }
        
        @media (max-width: 1024px) {
            .nav-overlay { width: 100%; }
            .admin-container { flex-direction: column; } .admin-sidebar { width: 100%; border-right: none; border-bottom: 1px solid var(--color-border); position: static; height: auto; } .admin-content { padding: 20px; }
            section:not(#related-posts) > .item-grid { display: none; }
            section:not(#related-posts) > .mobile-sliders-container { display: block; margin-top: 40px; }
            #related-posts .item-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
        }
        
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            #related-posts .item-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) { main { padding: 60px 15px; } section { margin-bottom: 60px; } .hero h1 { font-size: 2rem; } .nav-menu { padding: 80px 20px; } .nav-menu a { font-size: 1.5rem; } }
    </style>
<meta name="description" content="Professional website development and SEO for small and medium businesses in Tbilisi. Get a fast, modern, and results-driven website. Contact us for a free consultation!"><meta property="og:title" content="Digital Craft: Websites That Drive Business Growth in Tbilisi"><meta property="og:description" content="From stunning landing pages to robust e-commerce solutions, we build websites that deliver results for Georgian businesses."><meta property="og:image" content="https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&amp;w=1200&amp;h=630&amp;auto=format&amp;fit=crop"><link rel="canonical" href="https://digital-craft-ge.netlify.app/"><script type="application/ld+json">{"@type":"LocalBusiness","image":"https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=1200&h=630&auto=format&fit=crop","description":"Custom web development and SEO optimization services for businesses in Tbilisi, Georgia.","name":"Digital Craft Tbilisi","priceRange":"$$","url":"https://digital-craft-tbilisi.netlify.app/","telephone":"+995591102653","@context":"https://schema.org","address":{"addressCountry":"GE","@type":"PostalAddress","addressLocality":"Tbilisi"},"@id":"https://digital-craft-tbilisi.netlify.app/"}</script></head>
<body>
    <noscript><div><img src="https://mc.yandex.ru/watch/103413242" style="position:absolute; left:-9999px;" alt=""></div></noscript>

    <div id="loader" style="display: none;"><div class="spinner"></div></div>

    <iframe id="custom-background-iframe" title="Custom Background"></iframe>

    <button class="menu-toggle" aria-label="Toggle menu">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <div class="nav-overlay">
        <ul class="nav-menu"></ul>
    </div>

    <main>
            <div id="hero" class="hero"><h1>Web Development &amp; SEO in Tbilisi</h1><div class="hero-subtitle-container"><p></p><p>We create high-performance websites for Georgian businesses that attract clients and boost revenue. Modern design, cutting-edge technology, and measurable results.</p><p></p><ul class="hero-contact-list"><li><!-- Встраиваем стили с !important для гарантии срабатывания --></li><li><style></li><li>    /* Дадим уникальное имя классу, чтобы избежать случайных совпадений */</li><li>    .hero-list-animated li {</li><li>        opacity: 0 !important; /* Изначально невидимы (с высшим приоритетом) */</li><li>        transform: translateY(20px) !important; /* Сдвинуты вниз (с высшим приоритетом) */</li><li>        animation-name: heroListItemFadeIn !important; /* Назначаем анимацию (с высшим приоритетом) */</li><li>        animation-duration: 0.8s !important;</li><li>        animation-fill-mode: forwards !important;</li><li>        animation-timing-function: cubic-bezier(0.2, 0.8, 0.2, 1) !important;</li><li>    }</li><li>    /* Уникальное имя для самой анимации */</li><li>    @keyframes heroListItemFadeIn {</li><li>        to {</li><li>            opacity: 1 !important;</li><li>            transform: translateY(0) !important;</li><li>        }</li><li>    }</li><li>    /* Назначаем индивидуальные задержки каждому элементу */</li><li>    .hero-list-animated li:nth-child(1) {</li><li>        animation-delay: 0.6s !important;</li><li>    }</li><li>    .hero-list-animated li:nth-child(2) {</li><li>        animation-delay: 0.8s !important;</li><li>    }</li><li>    .hero-list-animated li:nth-child(3) {</li><li>        animation-delay: 1.0s !important;</li><li>    }</li><li></style></li><li><!-- Применяем наш уникальный класс 'hero-list-animated' к списку `ul` --></li><li><ul class="hero-list-animated" style="font-size: 0.8em; list-style-type: none; padding-left: 0; line-height: 1.6; margin-top: 25px;"><li>    </li><li><a href="https://wa.me/79119396075" target="_blank" rel="noopener noreferrer">WhatsApp</a></li><li>    </li><li><a href="https://t.me/ramashery" target="_blank" rel="noopener noreferrer">Telegram</a></li><li>    </li><li>+995591102653</li><li></li></ul></li></ul></div></div>
            <section id="services"><h2>Our Services</h2><div class="item-grid"><a href="./en/services/custom-web-development-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>Custom Web Development</h3><div class="card-subtitle">For Georgian Businesses</div><p>From landing pages to complex web applications. Fast, secure, and mobile-friendly.</p></div></a><a href="./en/services/seo-optimization-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1559526324-c1f275fbfa32?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>SEO Optimization</h3><div class="card-subtitle">Get Found on Google</div><p>Technical SEO, on-page optimization, and content strategy to rank higher in search results.</p></div></a><a href="./ka/services/veb-gverdebis-damzadeba-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1587620962725-abab7fe55159?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>ვებ გვერდების დამზადება</h3><div class="card-subtitle">ქართული ბიზნესისთვის</div><p>ლენდინგებიდან რთულ ვებ აპლიკაციებამდე. სწრაფი, უსაფრთხო და მობილურზე მორგებული.</p></div></a><a href="./ka/services/seo-optimizacia-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1543286386-713bdd548da4?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>SEO ოპტიმიზაცია</h3><div class="card-subtitle">გამოჩნდით Google-ში</div><p>ტექნიკური SEO, on-page ოპტიმიზაცია და კონტენტ სტრატეგია საძიებო სისტემებში მაღალი პოზიციებისთვის.</p></div></a><a href="./ru/services/razrabotka-saitov-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1542744173-8e7e53415bb0?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>Разработка Сайтов</h3><div class="card-subtitle">Для бизнеса в Грузии</div><p>От лендингов до интернет-магазинов. Создаем быстрые, адаптивные и надежные сайты под ключ.</p></div></a><a href="./ru/services/seo-prodvizhenie-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1563986768609-322da13575f3?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>SEO Продвижение</h3><div class="card-subtitle">Приводим клиентов из Google</div><p>Выведем ваш сайт на первые позиции в поиске Google. Техническая оптимизация, контент и локальное SEO.</p></div></a><a href="./ua/services/rozrobka-saitiv-tbilisi/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/N04MCLQr/flag-georgia-ukraine-406939-5912.jpg')"></div><div class="item-card__content"><h3>Розробка сайтів у Тбілісі</h3><div class="card-subtitle">Для українського бізнесу в Грузії</div><p>Створюємо сайти, які не просто гарно виглядають, а стають фундаментом вашого бізнесу, залучають клієнтів та збільшують прибуток.</p></div></a></div></section>
            <section id="portfolio"><h2>Our Work</h2><div class="item-grid"><a href="./ru/portfolio/keys-internet-magazin-minankari-art/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/Vvh7JfY6/IMG-20250720-174551.jpg')"></div><div class="item-card__content"><h3>Интернет-магазин Minankari.art</h3><div class="card-subtitle">Авторская платформа для грузинского художника</div><p>Разработка и запуск интернет-магазина под ключ для продажи авторских украшений из грузинской эмали по всему миру.</p></div></a><a href="./en/portfolio/tech-case-study-this-portfolio/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>This Portfolio: A Deep Dive</h3><div class="card-subtitle">The Technology Behind The Scenes</div><p>A case study on the Single-Page Application you're using right now, featuring a Firebase backend, a custom CMS, and dynamic SEO.</p></div></a><a href="./ka/portfolio/teqnikuri-keisi-es-portfolio/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1605379399642-870262d3d051?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>ეს პორტფოლიო: დეტალური ანალიზი</h3><div class="card-subtitle">ტექნოლოგიები კულისებს მიღმა</div><p>ამ საიტის ტექნიკური ანალიზი: ერთგვერდიანი აპლიკაცია (SPA) Firebase-ის ბექენდით, დინამიური SEO-თი და მართვის პანელით.</p></div></a><a href="./ru/portfolio/tekhnicheskiy-keys-etot-sayt-portfolio/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1541701494587-cb58502866ab?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>Этот сайт: Глубокий анализ</h3><div class="card-subtitle">Технологии </div><p>Технический разбор одностраничного приложения (SPA), на котором вы находитесь: бэкенд на Firebase, своя CMS и динамическое SEO.</p></div></a><a href="./en/portfolio/case-study-minankari-art-ecommerce/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/Ls5LQcnv/1752544761703-01.jpg')"></div><div class="item-card__content"><h3>Minankari.art E-commerce</h3><div class="card-subtitle">Bespoke Online Store for a Georgian Artist</div><p>A custom e-commerce platform designed to showcase and sell unique Georgian cloisonné enamel art to a global audience.</p></div></a><a href="./ka/portfolio/keisi-minankari-art-onlain-magazia/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/8cxH1ZHf/IMG-20250714-WA0007.jpg')"></div><div class="item-card__content"><h3>ონლაინ მაღაზია Minankari.art</h3><div class="card-subtitle">ექსკლუზიური პლატფორმა ქართველი ხელოვანისთვის</div><p>შევქმენით უნიკალური ონლაინ მაღაზია ქართული მინანქრის ნამუშევრების პოპულარიზაციისა და საერთაშორისო გაყიდვებისთვის.</p></div></a></div></section>
            <section id="blog"><h2>Latest Insights</h2><div class="item-grid"><a href="./ru/blog/kogda-zakazyvat-seo-do-ili-posle-zapuska/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?q=80&amp;w=2070&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>Когда заказывать SEO: до или после запуска сайта?</h3><div class="card-subtitle">Советы для бизнеса</div><p>"Сделаем SEO потом" — главная ошибка, которая убивает ваш сайт. Узнайте, почему закладывать SEO-фундамент нужно с первого дня разработки.</p></div></a><a href="./ka/blog/rodis-davukvetot-seo-kartulad/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1580541832626-2a7131ee809f?q=80&amp;w=2070&amp;auto=format=fit=crop')"></div><div class="item-card__content"><h3>როდის დავუკვეთოთ SEO: საიტის გაშვებამდე თუ შემდეგ?</h3><div class="card-subtitle">რჩევები ბიზნესისთვის</div><p>"SEO-ზე მერე ვიფიქროთ" — მთავარი შეცდომა, რომელიც ვნებს თქვენს საიტს. გაიგეთ, რატომ არის SEO-საძირკვლის ჩაყრა პირველივე დღიდან მნიშვნელოვანი.</p></div></a><a href="./ru/blog/pochemu-sajt-dolzhen-byt-marketingovym-instrumentom/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/Y9f5vxnC/SEO-INOVATION-WEBSITE-WPML-2020.jpg')"></div><div class="item-card__content"><h3>Сайт как маркетинговый инструмент</h3><div class="card-subtitle">Стратегия и Рост</div><p>Узнайте, почему 90% сайтов в Грузии не приносят клиентов и как превратить ваш веб-сайт из пассива в самый эффективный актив для бизнеса в Тбилиси.</p></div></a><a href="./en/blog/why-your-website-should-be-a-marketing-tool/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/rpNwG5zK/1724931817522.jpg')"></div><div class="item-card__content"><h3>Your Website: An Asset or an Expense?</h3><div class="card-subtitle">Business Growth Strategy</div><p>Discover why most websites in Georgia fail to attract clients and how to turn your online presence into a 24/7 sales tool for your Tbilisi business.</p></div></a><a href="./ka/blog/ratom-schirdeba-bizness-marketinguli-instrumenti/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/xCPysftR/360-F-938776441-x-U23-JEz-Sj-Ww5-WMFNf6qzn-V2f8qc-PPU2-K.jpg')"></div><div class="item-card__content"><h3>საიტი, რომელიც ყიდის</h3><div class="card-subtitle">ბიზნესის ზრდის სტრატეგია</div><p>გაიგეთ, რატომ ვერ მოჰყავს კლიენტები საიტების 90%-ს საქართველოში და როგორ აქციოთ თქვენი ვებ-გვერდი ბიზნესის მთავარ აქტივად.</p></div></a><a href="./ru/blog/sait-dlya-restorana-tbilisi-5-funkcij/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1552566626-52f8b828add9?q=80&amp;w=1200&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>Сайт для ресторана в Тбилиси: 5 функций для роста</h3><div class="card-subtitle">Бизнес и Маркетинг</div><p>Узнайте, как превратить сайт вашего заведения из визитки в машину для привлечения гостей и увеличения заказов. Разбираем 5 обязательных функций.</p></div></a><a href="./en/blog/restaurant-website-tbilisi-5-essential-features/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1414235077428-338989a2e8c0?q=80&amp;w=1200&amp;auto=format&amp;fit=crop')"></div><div class="item-card__content"><h3>A Website for Your Tbilisi Restaurant: 5 Essential Features</h3><div class="card-subtitle">Business &amp; Marketing</div><p>Discover the 5 key features that turn a simple website into a powerful tool for boosting bookings, attracting guests, and increasing revenue.</p></div></a><a href="./ka/blog/vebgverdi-restornistvis-tbilisi-5-funqcia/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.pexels.com/photos/262047/pexels-photo-262047.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=1260&amp;h=750&amp;dpr=2')"></div><div class="item-card__content"><h3>ვებგვერდი რესტორნისთვის: 5 ფუნქცია შემოსავლისთვის</h3><div class="card-subtitle">ბიზნესი და მარკეტინგი</div><p>გაიგეთ, როგორ აქციოთ თქვენი რესტორნის საიტი სტუმრების მოზიდვისა და ჯავშნების ზრდის მძლავრ ინსტრუმენტად. განვიხილავთ 5 მთავარ ფუნქციას.</p></div></a><a href="./ru/blog/7-seo-oshibok-saitov-v-gruzii/" class="item-card"><div class="item-card__image" style="background-image: url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&amp;w=2070&amp;auto=format=fit=crop')"></div><div class="item-card__content"><h3>7 главных SEO-ошибок сайтов в Грузии</h3><div class="card-subtitle">Аудит и Продвижение</div><p>Узнайте, почему 90% сайтов в Грузии "невидимы" для Google и как исправить базовые ошибки, которые мешают вашему росту.</p></div></a><a href="./en/blog/7-critical-seo-mistakes-in-georgia/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/FKwrRnkX/jtdzz8pd9tokvxju12nnhv2q41fbwq0d.jpg')"></div><div class="item-card__content"><h3>7 Critical SEO Mistakes in Georgia</h3><div class="card-subtitle">SEO Audit &amp; Strategy</div><p>Discover the 7 common errors holding back 90% of websites in Georgia and learn how to fix them to outrank your competitors.</p></div></a><a href="./ka/blog/7-seo-shetsdoma-saitebistvis-sakartveloshi/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/zf4WnrPd/seo-177264890.jpg')"></div><div class="item-card__content"><h3>7 კრიტიკული SEO შეცდომა საქართველოში</h3><div class="card-subtitle">SEO აუდიტი და სტრატეგია</div><p>გაიგეთ, რატომ არის საიტების 90% "უხილავი" Google-ისთვის და როგორ გამოასწოროთ საბაზისო შეცდომები, რომლებიც ხელს უშლის თქვენს ბიზნესს.</p></div></a><a href="./ru/blog/zapreschennye-priemy-seo-v-gruzii/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/59B54276/170883.jpg')"></div><div class="item-card__content"><h3>Запрещенные приемы в SEO</h3><div class="card-subtitle">Безопасность и Риски</div><p>Узнайте о "черных" методах SEO, за которые Google может навсегда забанить ваш сайт в Грузии, и как распознать недобросовестного подрядчика.</p></div></a><a href="./en/blog/black-hat-seo-risks-georgia/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/bJTB29yB/IMG-20250725-034055.jpg')"></div><div class="item-card__content"><h3>Black Hat SEO: The Shortcuts That Can Ban Your Website</h3><div class="card-subtitle">SEO &amp; Digital Strategy</div><p>"Guaranteed #1 on Google" sounds tempting, but it can destroy your business. Learn to identify dangerous SEO tactics and protect your website.</p></div></a><a href="./ka/blog/shavi-seo-safrtkheebi-saqartveloshi/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/DzsMgKgH/IMG-20250725-042021.jpg')"></div><div class="item-card__content"><h3>შავი SEO: მოკლე გზები, რომლებიც ბიზნესს ანადგურებს</h3><div class="card-subtitle">SEO და ციფრული სტრატეგია</div><p>ნუ ენდობით 'გარანტირებულ #1 პოზიციას'. გაიგეთ, რა საშიშროებას უქმნის შავი SEO თქვენს ვებსაიტს საქართველოში და როგორ დაიცვათ თავი.</p></div></a><a href="./ru/blog/check-list-zapuska-saita-v-gruzii/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/G3XHFXQJ/2.jpg')"></div><div class="item-card__content"><h3>Чек-лист: 10 проверок перед запуском сайта</h3><div class="card-subtitle">Бизнес в Грузии</div><p>Узнайте, как избежать дорогих ошибок и запустить сайт, который готов приносить прибыль с первого дня. Полный чек-лист для владельцев бизнеса в Грузии.</p></div></a><a href="./en/blog/website-launch-checklist-georgia/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/FKWJrmKq/Georgia.jpg')"></div><div class="item-card__content"><h3>Website Launch Checklist in Georgia</h3><div class="card-subtitle">For Businesses &amp; Expats</div><p>For Businesses &amp; Expats
description: Avoid costly mistakes and launch a website that's ready to attract customers from day one. Our essential 10-point checklist for business owners in Georgia.</p></div></a><a href="./ka/blog/saitis-gashvebis-cheqlisti-saqartveloshi/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/9FcR71kC/cbw-20221019-Georgia-N6222.jpg')"></div><div class="item-card__content"><h3>საიტის გაშვების ჩექლისტი</h3><div class="card-subtitle">ბიზნესისთვის საქართველოში</div><p>ისწავლეთ, როგორ აიცილოთ თავიდან ძვირადღირებული შეცდომები და გაუშვათ საიტი, რომელიც პირველივე დღიდან მზად არის მოგების მოსატანად.</p></div></a><a href="./ua/blog/chek-lyst-zapusku-saitu-v-hruzii/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/Y0FQX9Hg/3f8aa34acaa8a364fa719a7f9a54cd26-desktop.webp')"></div><div class="item-card__content"><h3>Чек-лист запуску сайту</h3><div class="card-subtitle">Для бізнесу в Грузії</div><p>Уникніть дорогих помилок та запустіть сайт, готовий залучати клієнтів. Наш головний чек-лист для підприємців у Грузії.</p></div></a></div></section>
            <section id="contact"><h2>Get in Touch</h2><div class="item-grid"><a href="./en/contact/en-contact/" class="item-card"><div class="item-card__image" style="background-image: url('https://i.postimg.cc/KjVRDPGS/60312-800.jpg')"></div><div class="item-card__content"><h3>Let's Get in Touch</h3><div class="card-subtitle">I'm available for new projects</div><p>Ready to start a project or just want to ask a question? I'm here to help. Click to see how you can reach me.</p></div></a><a href="./en/contact/new-item-title6543/" class="item-card"><div class="item-card__image" style="background-image: url('')"></div><div class="item-card__content"><h3>New Item Title</h3><div class="card-subtitle">New Subtitle</div><p>A short description for the card.</p></div></a></div></section>
        </main>
    
    <footer class="site-footer" id="site-footer"></footer>

    <div id="admin-panel">
        <div class="admin-container">
            <div class="admin-sidebar">
                <h3>Admin Panel</h3>
                <ul class="admin-tabs">
                    <li class="admin-tab active" data-tab="home">Home Page</li>
                    <li class="admin-tab" data-tab="services">Services</li>
                    <li class="admin-tab" data-tab="portfolio">Portfolio</li>
                    <li class="admin-tab" data-tab="blog">Blog</li>
                    <li class="admin-tab" data-tab="contact">Contact</li>
                </ul>
            </div>
            <div class="admin-content">
                <button id="admin-close-btn" title="Close Admin Panel">×</button>
                <div class="tab-content active" data-tab-content="home"></div>
                <div class="tab-content" data-tab-content="services"></div>
                <div class="tab-content" data-tab-content="portfolio"></div>
                <div class="tab-content" data-tab-content="blog"></div>
                <div class="tab-content" data-tab-content="contact"></div>
            </div>
        </div>
    </div>
    
    <script type="module">
        // --- ИЗМЕНЕНИЕ: Переход на модульный Firebase SDK (v9+) ---
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js';
        import { getFirestore, collection, doc, getDoc, getDocs, writeBatch, setDoc, updateDoc, deleteDoc } from 'https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js';
        import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js';

        // --- FIREBASE CONFIGURATION ---
        const firebaseConfig = {
          apiKey: "AIzaSyAT4dDEIDUtzP60ibjahO06P75Q6h95ZN4",
          authDomain: "razrabotka-b61bc.firebaseapp.com",
          projectId: "razrabotka-b61bc",
          storageBucket: "razrabotka-b61bc.firebasestorage.app",
          messagingSenderId: "394402564794",
          appId: "1:394402564794:web:f610ffb03e655c600c5083"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // --- LOCAL DATA CACHE & INITIAL DATA ---
        let siteData = {};
        const initialSiteData = {
            home: { h1: "Loading...", subtitle: "Please wait while we fetch the latest data.", lang: "en", seoTitle: "Digital Craft", metaDescription: "Professional websites for small businesses", schemaJsonLd: {}, ogTitle: "", ogDescription: "", ogImage: "", backgroundHtml: "" },
            services: [],
            portfolio: [],
            blog: [],
            contact: []
        };
        
        // --- SEO & DATA FUNCTIONS ---
        function renderSeoTags(data) { document.querySelectorAll('meta[name="description"], meta[property^="og:"], script[type="application/ld+json"], link[rel="canonical"]').forEach(el => el.remove()); document.title = data.seoTitle || "Digital Craft"; document.documentElement.lang = data.lang || 'en'; const createMeta = (attr, key, value) => { if (value) { const meta = document.createElement('meta'); meta.setAttribute(attr, key); meta.content = value; document.head.appendChild(meta); } }; createMeta('name', 'description', data.metaDescription); createMeta('property', 'og:title', data.ogTitle || data.seoTitle); createMeta('property', 'og:description', data.ogDescription || data.metaDescription); const ogImage = data.media?.find(url => !/youtube|vimeo/.test(url)) || data.ogImage; if (ogImage) createMeta('property', 'og:image', ogImage); const canonical = document.createElement('link'); canonical.rel = 'canonical'; canonical.href = window.location.href; document.head.appendChild(canonical); if (data.schemaJsonLd && typeof data.schemaJsonLd === 'object' && Object.keys(data.schemaJsonLd).length > 0) { const script = document.createElement('script'); script.type = 'application/ld+json'; script.textContent = JSON.stringify(data.schemaJsonLd); document.head.appendChild(script); } }
        
        async function seedDatabaseIfEmpty() { const homeDocRef = doc(db, 'home', 'content'); const homeDoc = await getDoc(homeDocRef); if (!homeDoc.exists()) { console.log("Database is empty. Seeding with initial data..."); const batch = writeBatch(db); batch.set(homeDocRef, initialSiteData.home); for (const key of ['services', 'portfolio', 'blog', 'contact']) { (initialSiteData[key] || []).forEach(item => { const { id, ...data } = item; const itemDocRef = doc(db, key, id); batch.set(itemDocRef, data); }); } await batch.commit(); console.log("Database seeded successfully."); } };
        async function loadData() { const freshSiteData = {}; try { await seedDatabaseIfEmpty(); const collections = ['services', 'portfolio', 'blog', 'contact']; const dataPromises = [ getDoc(doc(db, 'home', 'content')), ...collections.map(col => getDocs(collection(db, col))) ]; const [homeDoc, ...snapshots] = await Promise.all(dataPromises); const processDocData = (data) => { if (data && typeof data.schemaJsonLd === 'string' && data.schemaJsonLd.trim().startsWith('{')) { try { data.schemaJsonLd = JSON.parse(data.schemaJsonLd); } catch (e) { console.error('Failed to parse schemaJsonLd string:', e); data.schemaJsonLd = {}; } } return data; }; freshSiteData.home = homeDoc.exists() ? processDocData(homeDoc.data()) : {}; collections.forEach((col, index) => { freshSiteData[col] = snapshots[index].docs.map(doc => ({ id: doc.id, ...processDocData(doc.data()) })); }); return freshSiteData; } catch (error) { console.error("Error loading data from Firebase:", error); return JSON.parse(JSON.stringify(initialSiteData)); } }
        
        // --- ROUTER AND RENDER LOGIC ---
        const mainContentEl = document.querySelector('main');
        const defaultLang = 'en';
        const isGitHubPages = window.location.hostname.includes('github.io');
        const repoName = isGitHubPages ? window.location.pathname.split('/')[1] || '' : '';
        const basePath = isGitHubPages && repoName ? `/${repoName}` : '';

        function formatContentHtml(content) {
            if (!content) return '';
            let processedContent = content.replace(/\r\n/g, '\n');
            const blocks = processedContent.split(/\n{2,}/);
            const html = blocks.map(block => {
                const trimmedBlock = block.trim();
                if (!trimmedBlock) return '';
                const youtubeRegex = /^https?:\/\/(?:www\.|m\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch?v=|watch\?.*&v=|shorts\/))([a-zA-Z0-9_-]{11}).*$/;
                const imageRegex = /^https?:\/\/[^<>"']+\.(?:jpg|jpeg|png|gif|webp|svg)\s*$/i;
                const youtubeMatch = trimmedBlock.match(youtubeRegex);
                const imageMatch = trimmedBlock.match(imageRegex);
                if (/^<(p|div|h[1-6]|ul|ol|li|blockquote|hr|table|pre)/i.test(trimmedBlock)) { return trimmedBlock; }
                else if (youtubeMatch && youtubeMatch[1]) { const videoId = youtubeMatch[1]; return `<div class="embedded-video" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000; margin: 1.5em 0; border-radius: 4px; border: 1px solid var(--color-border);"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" src="https://www.youtube.com/embed/${videoId}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`; } 
                else if (imageMatch) { return `<p style="margin: 1.5em 0;"><img src="${trimmedBlock}" alt="Embedded content" style="max-width: 100%; height: auto; display: block; margin: 0 auto; border-radius: 4px; border: 1px solid var(--color-border);" /></p>`; } 
                else { return `<p>${trimmedBlock.replace(/\n/g, '<br>')}</p>`; }
            }).join('');
            return html;
        }
        
        let paragraphObserver; 
        let floatingObserver;
        let homePageObserver;

        function routeAndRender() { 
            if (typeof ym === 'function') { ym(103413242, 'hit', window.location.href); }
            if (paragraphObserver) paragraphObserver.disconnect();
            if (floatingObserver) floatingObserver.disconnect();
            if (homePageObserver) homePageObserver.disconnect();

            const path = window.location.pathname; 
            const pathWithoutBase = path.startsWith(basePath) ? path.substring(basePath.length) || '/' : path;
            const detailPageRegex = /^\/(?:([a-z]{2})\/)?(services|portfolio|blog|contact)\/([a-zA-Z0-9-]+)\/?$/;
            const match = pathWithoutBase.match(detailPageRegex);
            const footer = document.getElementById('site-footer'); 
            
            mainContentEl.innerHTML = '';
            footer.style.display = 'none';

            if (match) { 
                const [, lang, collection, slug] = match;
                const currentLang = lang || defaultLang;
                renderDetailPage(collection, slug, currentLang);
            } else { 
                renderHomePage(); 
                footer.style.display = 'block';
            } 
        };
        
        // ИЗМЕНЕНИЕ: Структура HTML для главной страницы исправлена, чтобы h1 не был вложен в section
        function renderHomePage() { 
            mainContentEl.innerHTML = `
                <div id="hero" class="hero"></div>
                <section id="services"></section>
                <section id="portfolio"></section>
                <section id="blog"></section>
                <section id="contact"></section>
            `; 
            
            document.getElementById('admin-panel').style.display = ''; 
            applyCustomBackground(); 
            updateMetaTags(); 
            
            renderHero(); 
            renderSection('services', 'Our Services', siteData.services); 
            renderSection('portfolio', 'Our Work', siteData.portfolio); 
            renderSection('blog', 'Latest Insights', siteData.blog); 
            renderSection('contact', 'Get in Touch', siteData.contact);
            
            initMobileSliders();
            initFloatingObservers();
            initHomePageObservers();
            renderAdminPanel(); 
        };

        // ИЗМЕНЕНИЕ: Структура HTML для страницы услуги исправлена, чтобы h1 не был вложен в section
        function renderDetailPage(collection, slug, lang) {
            const item = siteData[collection]?.find(d => d.urlSlug === slug && d.lang === lang);
            if (!item) {
                mainContentEl.innerHTML = `<section class="detail-page-header"><h1>404 - Not Found</h1><p>The page you were looking for does not exist.</p><a href="${basePath || '/'}">Go back home</a></section>`;
                document.title = "404 Not Found | Digital Craft"; 
                applyCustomBackground(); 
                return;
            }
            document.getElementById('admin-panel').style.display = 'none';
            document.documentElement.lang = lang;
            applyCustomBackground(item);
            updateMetaTags(item);
            const formattedContent = formatContentHtml(item.mainContent);
            
            mainContentEl.innerHTML = `
                <div class="detail-page-header">
                    <h1 class="fade-in-up" style="animation-delay: 0.5s;">${item.h1 || ''}</h1>
                    ${item.price ? `<div class="detail-price fade-in-up" style="animation-delay: 0.7s;">${item.price}</div>` : ''}
                </div>
                <section>
                    <div class="detail-content">${formattedContent}</div>
                </section>`;
            
            renderRelatedPosts(collection, slug, lang);
            initParagraphObservers();
        }
        
        function renderRelatedPosts(currentCollection, currentSlug, currentLang) {
            const pool = [
                ...siteData.services.map(i => ({ ...i, collection: 'services' })),
                ...siteData.blog.map(i => ({ ...i, collection: 'blog' }))
            ];

            const relatedItems = pool
                .filter(item => item.lang === currentLang && !(item.collection === currentCollection && item.urlSlug === currentSlug))
                .sort(() => 0.5 - Math.random())
                .slice(0, 3);

            if (relatedItems.length === 0) return;

            const itemsHTML = relatedItems.map(item => {
                const langPrefix = item.lang ? `/${item.lang}` : '';
                const itemUrl = `${basePath}${langPrefix}/${item.collection}/${item.urlSlug}`;
                return `<a href="${itemUrl}" class="item-card floating-item"><div class="item-card__image" style="background-image: url('${(item.media || []).find(url => !/youtube|vimeo/.test(url)) || ''}')"></div><div class="item-card__content"><h3>${item.title}</h3><div class="card-subtitle">${item.subtitle}</div><p>${item.description}</p></div></a>`
            }).join('');

            const relatedSection = document.createElement('section');
            relatedSection.id = 'related-posts';
            relatedSection.innerHTML = `
                <h2 class="fade-in-up">You Might Also Like</h2>
                <div class="item-grid">${itemsHTML}</div>
            `;
            mainContentEl.appendChild(relatedSection);
            initFloatingObservers();
        }

        function updateMetaTags(itemData = {}) { 
            const dataToRender = (itemData && Object.keys(itemData).length && itemData.seoTitle) ? itemData : siteData.home; 
            renderSeoTags(dataToRender);
        }

        function renderMenu() {
            const menuEl = document.querySelector('.nav-menu');
            if (!menuEl) return;
            const menuItems = [ { label: 'Home', href: `${basePath || '/'}#hero` }, { label: 'Services', href: `${basePath || '/'}#services` }, { label: 'Portfolio', href: `${basePath || '/'}#portfolio` }, { label: 'Blog', href: `${basePath || '/'}#blog` }, { label: 'Contact', href: `${basePath || '/'}#contact` } ];
            menuEl.innerHTML = menuItems.map(item => `<li><a href="${item.href}">${item.label}</a></li>`).join('');
        }
        
        function renderHero() {
            const heroContainer = document.getElementById('hero');
            if (!heroContainer) return;
            
            const { h1, subtitle } = siteData.home;
            let heroContent = `<h1>${h1 || ''}</h1>`;
            
            if (subtitle) {
                const parts = subtitle.split(/\n\s*\n/);
                const introText = parts[0] || '';
                const contactLines = parts.length > 1 ? parts.slice(1).join('\n').split('\n').filter(line => line.trim()) : [];
                
                heroContent += `<div class="hero-subtitle-container"><p>${introText}</p>`;
                
                if (contactLines.length > 0) {
                    const listItems = contactLines.map((line) => `<li>${line}</li>`).join('');
                    heroContent += `<ul class="hero-contact-list">${listItems}</ul>`;
                }
                heroContent += `</div>`;
            }
            
            heroContainer.innerHTML = heroContent;
        };
        
        function renderSection(key, title, items) { 
            const section = document.getElementById(key); 
            if (!section) return;

            const itemsFromDb = items || siteData[key] || [];
            
            const desktopItemsHTML = itemsFromDb.map(item => {
                const langPrefix = item.lang ? `/${item.lang}` : '';
                const itemUrl = `${basePath}${langPrefix}/${key}/${item.urlSlug}`;
                return `<a href="${itemUrl}" class="item-card floating-item"><div class="item-card__image" style="background-image: url('${(item.media || []).find(url => !/youtube|vimeo/.test(url)) || ''}')"></div><div class="item-card__content"><h3>${item.title}</h3><div class="card-subtitle">${item.subtitle}</div><p>${item.description}</p></div></a>`
            }).join(''); 
            const desktopGrid = `<div class="item-grid">${desktopItemsHTML}</div>`;

            const langOrder = ['en', 'ka', 'ua', 'ru'];
            const itemsByLang = {};
            itemsFromDb.forEach(item => {
                if (!itemsByLang[item.lang]) itemsByLang[item.lang] = [];
                itemsByLang[item.lang].push(item);
            });

            const mobileSlidersHTML = langOrder.map(lang => {
                const langItems = itemsByLang[lang];
                if (!langItems || langItems.length === 0) return '';
                
                const slidesHTML = langItems.map((item, index) => {
                    const langPrefix = item.lang ? `/${item.lang}` : '';
                    const itemUrl = `${basePath}${langPrefix}/${key}/${item.urlSlug}`;
                    return `<a href="${itemUrl}" class="item-card ${index === 0 ? 'active' : ''}"><div class="item-card__image" style="background-image: url('${(item.media || []).find(url => !/youtube|vimeo/.test(url)) || ''}')"></div><div class="item-card__content"><h3>${item.title}</h3><div class="card-subtitle">${item.subtitle}</div><p>${item.description}</p></div></a>`
                }).join('');

                const dotsHTML = langItems.length > 1 
                    ? langItems.map((_, index) => `<span class="slider-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></span>`).join('')
                    : '';

                return `
                    <div class="language-slider-block">
                        <div class="cross-fade-slider">${slidesHTML}</div>
                        <div class="slider-nav">${dotsHTML}</div>
                    </div>
                `;
            }).join('');
            const mobileContainer = `<div class="mobile-sliders-container">${mobileSlidersHTML}</div>`;
            
            section.innerHTML = `<div class="animated-container"><h2>${title}</h2></div>${desktopGrid}${mobileContainer}`;
        };

        function renderAdminPanel() { renderAdminHome(); renderAdminSection('services'); renderAdminSection('portfolio'); renderAdminSection('blog'); renderAdminSection('contact'); };
        function renderAdminHome() { const container = document.querySelector('.tab-content[data-tab-content="home"]'); if(!container) return; const data = siteData.home || {}; container.innerHTML = `<div class="admin-section-header"><h2>Home Page Content & SEO</h2></div><div class="admin-item" id="admin-home-item"><div class="admin-item-content"><h4>Visible Content</h4><label for="home-h1">Main Header (H1)</label><input type="text" id="home-h1" value="${data.h1 || ''}" disabled><label for="home-subtitle">Subtitle</label><textarea id="home-subtitle" rows="3" disabled>${data.subtitle || ''}</textarea><h4>Critical SEO</h4><label for="home-lang">Language (e.g., en, ru)</label><input type="text" id="home-lang" value="${data.lang || 'en'}" disabled><label for="home-seoTitle">SEO Title Tag (&lt; 60 chars)</label><input type="text" id="home-seoTitle" value="${data.seoTitle || ''}" disabled><label for="home-metaDescription">Meta Description (&lt; 160 chars)</label><textarea id="home-metaDescription" rows="3" disabled>${data.metaDescription || ''}</textarea><h4>Schema.org for Organization</h4><label>JSON-LD Code</label><textarea id="home-schemaJsonLd" rows="8" disabled>${typeof data.schemaJsonLd === 'object' ? JSON.stringify(data.schemaJsonLd, null, 2) : data.schemaJsonLd || '{}'}</textarea><h4>Social Media Sharing (Open Graph)</h4><label for="home-ogTitle">OG Title</label><input type="text" id="home-ogTitle" value="${data.ogTitle || ''}" disabled><label for="home-ogDescription">OG Description</label><textarea id="home-ogDescription" rows="3" disabled>${data.ogDescription || ''}</textarea><label for="home-ogImage">OG Image URL (1200x630px recommended)</label><input type="text" id="home-ogImage" value="${data.ogImage || ''}" disabled><h4>Custom Background</h4><label for="home-backgroundHtml">Custom Background HTML/JS/CSS (leave empty for default animation)</label><textarea id="home-backgroundHtml" rows="10" disabled>${data.backgroundHtml || ''}</textarea></div><div class="admin-item-actions"><button class="admin-btn edit-btn" data-action="edit-home">Edit</button><button class="admin-btn save-btn" data-action="save-home">Save</button></div></div>`;};
        
        function renderAdminSection(key) { const container = document.querySelector(`.tab-content[data-tab-content="${key}"]`); if(!container) return; const title = key.charAt(0).toUpperCase() + key.slice(1); const itemsHTML = (siteData[key] || []).map(item => `<div class="admin-item" data-id="${item.id}" data-key="${key}"><div class="admin-item-content"><h4>Card Content (On Home Page)</h4><label>Card Title</label><input type="text" class="admin-input-title" value="${item.title || ''}" disabled><label>Card Subtitle / Date</label><input type="text" class="admin-input-subtitle" value="${item.subtitle || ''}" disabled><label>Card Description</label><textarea class="admin-input-description" rows="3" disabled>${item.description || ''}</textarea><h4>Detailed Page Content</h4><label>Language</label><select class="admin-input-lang" disabled><option value="en" ${item.lang === 'en' ? 'selected' : ''}>English (en)</option><option value="ru" ${item.lang === 'ru' ? 'selected' : ''}>Русский (ru)</option><option value="ka" ${item.lang === 'ka' ? 'selected' : ''}>Georgian (ka)</option><option value="ua" ${item.lang === 'ua' ? 'selected' : ''}>Ukrainian (ua)</option></select><label>Page URL Slug</label><input type="text" class="admin-input-urlSlug" value="${item.urlSlug || ''}" disabled><label>Page Main Header (H1)</label><input type="text" class="admin-input-h1" value="${item.h1 || ''}" disabled><label>Price / Budget</label><input type="text" class="admin-input-price" value="${item.price || ''}" disabled><label>Main Page Content (Supports HTML and paragraph breaks)</label><textarea class="admin-input-mainContent" rows="8" disabled>${item.mainContent || ''}</textarea><label>Media (URLs, one per line)</label><textarea class="admin-input-media" rows="4" disabled>${(item.media || []).join('\n')}</textarea><label>Main Image Alt Text</label><input type="text" class="admin-input-mainImageAlt" value="${item.mainImageAlt || ''}" disabled><h4>SEO & Metadata</h4><label>SEO Title Tag</label><input type="text" class="admin-input-seoTitle" value="${item.seoTitle || ''}" disabled><label>Meta Description</label><textarea class="admin-input-metaDescription" rows="3" disabled>${item.metaDescription || ''}</textarea><label>Schema.org JSON-LD</label><textarea class="admin-input-schemaJsonLd" rows="5" disabled>${typeof item.schemaJsonLd === 'object' ? JSON.stringify(item.schemaJsonLd, null, 2) : item.schemaJsonLd || '{}'}</textarea><h4>Custom Background</h4><label>Custom Page Background HTML/JS/CSS</label><textarea class="admin-input-backgroundHtml" rows="6" disabled>${item.backgroundHtml || ''}</textarea></div><div class="admin-item-actions"><button class="admin-btn edit-btn" data-action="edit">Edit</button><button class="admin-btn save-btn" data-action="save">Save</button><button class="admin-btn delete-btn" data-action="delete">Delete</button></div></div>`).join(''); container.innerHTML = `<div class="admin-section-header"><h2>Manage ${title}</h2><button class="admin-btn" data-action="add" data-key="${key}">+ Add New</button></div>${itemsHTML}`;};

        async function handleAdminActions(e) { const target = e.target; const action = target.dataset.action; if (!action) return; const itemEl = target.closest('.admin-item'); const setEditingState = (el, isEditing) => { el.classList.toggle('is-editing', isEditing); el.querySelectorAll('input, textarea, select').forEach(input => input.disabled = !isEditing); }; try { if (action === 'edit-home') { setEditingState(itemEl, true); return; } if (action === 'save-home') { setEditingState(itemEl, false); let schemaValue = itemEl.querySelector('#home-schemaJsonLd').value; try { schemaValue = JSON.parse(schemaValue); } catch(err) { console.error("Invalid JSON in home schema", err); alert("Error: Invalid JSON in Schema field."); return; } const updatedData = { h1: itemEl.querySelector('#home-h1').value, subtitle: itemEl.querySelector('#home-subtitle').value, lang: itemEl.querySelector('#home-lang').value, seoTitle: itemEl.querySelector('#home-seoTitle').value, metaDescription: itemEl.querySelector('#home-metaDescription').value, schemaJsonLd: schemaValue, ogTitle: itemEl.querySelector('#home-ogTitle').value, ogDescription: itemEl.querySelector('#home-ogDescription').value, ogImage: itemEl.querySelector('#home-ogImage').value, backgroundHtml: itemEl.querySelector('#home-backgroundHtml').value, }; await updateDoc(doc(db, 'home', 'content'), updatedData); await loadData().then(freshData => { siteData = freshData; routeAndRender(); }); alert('Home page updated!'); return; } const key = target.dataset.key || itemEl.dataset.key; const id = itemEl ? itemEl.dataset.id : null; switch(action) { case 'edit': setEditingState(itemEl, true); break; case 'save': { setEditingState(itemEl, false); let schemaValue = itemEl.querySelector('.admin-input-schemaJsonLd').value; try { schemaValue = JSON.parse(schemaValue); } catch(err) { console.error("Invalid JSON in item schema", err); alert("Error: Invalid JSON in Schema field."); return; } const updatedData = { lang: itemEl.querySelector('.admin-input-lang').value, title: itemEl.querySelector('.admin-input-title').value, subtitle: itemEl.querySelector('.admin-input-subtitle').value, description: itemEl.querySelector('.admin-input-description').value, urlSlug: itemEl.querySelector('.admin-input-urlSlug').value.trim(), h1: itemEl.querySelector('.admin-input-h1').value, price: itemEl.querySelector('.admin-input-price').value, mainContent: itemEl.querySelector('.admin-input-mainContent').value, media: itemEl.querySelector('.admin-input-media').value.split('\n').map(s => s.trim()).filter(Boolean), mainImageAlt: itemEl.querySelector('.admin-input-mainImageAlt').value, seoTitle: itemEl.querySelector('.admin-input-seoTitle').value, metaDescription: itemEl.querySelector('.admin-input-metaDescription').value, schemaJsonLd: schemaValue, backgroundHtml: itemEl.querySelector('.admin-input-backgroundHtml').value, }; await updateDoc(doc(db, key, id), updatedData); await loadData().then(freshData => { siteData = freshData; routeAndRender(); }); alert('Item saved!'); break; } case 'delete': if (confirm('Are you sure you want to delete this item?')) { await deleteDoc(doc(db, key, id)); await loadData().then(freshData => { siteData = freshData; routeAndRender(); }); alert('Item deleted!'); } break; case 'add': const newId = `${key.slice(0, -1)}-${Date.now()}`; const newTitle = 'New Item Title'; const newSlug = newTitle.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, ''); const newItemData = { lang: defaultLang, urlSlug: newSlug, title: newTitle, subtitle: 'New Subtitle', description: 'A short description for the card.', h1: newTitle, mainContent: 'Full content for the detailed page.\n\nHTML and paragraph breaks are supported!', price: '', media: [], mainImageAlt: '', seoTitle: newTitle, metaDescription: '', schemaJsonLd: {}, backgroundHtml: '' }; await setDoc(doc(db, key, newId), newItemData); await loadData().then(freshData => { siteData = freshData; routeAndRender(); }); alert('New item added. You can now edit it.'); break; } } catch(error) { console.error("Admin action failed:", error); alert("An error occurred. Please check the console."); }};
        
        // ИЗМЕНЕНИЕ: Улучшенная функция инициализации слайдеров
        function initMobileSliders() {
            document.querySelectorAll('.language-slider-block').forEach(sliderBlock => {
                const slider = sliderBlock.querySelector('.cross-fade-slider');
                const slides = slider.querySelectorAll('.item-card');
                const nav = sliderBlock.querySelector('.slider-nav');
                const dots = nav.querySelectorAll('.slider-dot');

                if (slides.length <= 1) {
                    // Если слайд один, просто делаем его видимым и устанавливаем высоту
                    const activeSlide = slider.querySelector('.item-card.active');
                    if (activeSlide) {
                       // Задержка для правильного расчета высоты после рендеринга
                       setTimeout(() => { slider.style.height = `${activeSlide.offsetHeight}px`; }, 100);
                    }
                    return;
                }

                let currentIndex = 0;
                let touchStartX = 0;
                let autoSlideInterval;

                const updateSliderHeight = () => {
                    const activeSlide = slider.querySelector('.item-card.active');
                    if (activeSlide) {
                        slider.style.height = `${activeSlide.offsetHeight}px`;
                    }
                };

                function goToSlide(index) {
                    currentIndex = (index + slides.length) % slides.length;
                    slides.forEach((s, i) => s.classList.toggle('active', i === currentIndex));
                    dots.forEach((d, i) => d.classList.toggle('active', i === currentIndex));
                    updateSliderHeight();
                }

                function startAutoSlide() {
                    stopAutoSlide();
                    autoSlideInterval = setInterval(() => goToSlide(currentIndex + 1), 5000);
                }

                function stopAutoSlide() {
                    clearInterval(autoSlideInterval);
                }
                
                // Инициализация
                updateSliderHeight(); // Устанавливаем начальную высоту
                startAutoSlide(); // Запускаем авто-слайд

                nav.addEventListener('click', e => {
                    if (e.target.matches('.slider-dot')) {
                        stopAutoSlide();
                        goToSlide(parseInt(e.target.dataset.index));
                        startAutoSlide();
                    }
                });
                
                slider.addEventListener('touchstart', e => {
                    touchStartX = e.changedTouches[0].screenX;
                    stopAutoSlide();
                }, { passive: true });

                slider.addEventListener('touchend', e => {
                    const touchEndX = e.changedTouches[0].screenX;
                    const swipeThreshold = 40;
                    if (touchEndX < touchStartX - swipeThreshold) {
                        goToSlide(currentIndex + 1);
                    } else if (touchEndX > touchStartX + swipeThreshold) {
                        goToSlide(currentIndex - 1);
                    }
                    startAutoSlide();
                }, { passive: true });
            });
        }

        function createFloatingObserver() {
            return new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const target = entry.target;
                    const isAboveViewport = entry.boundingClientRect.top < 0;
                    if (entry.isIntersecting) { target.classList.add('is-visible'); target.classList.remove('is-above'); } 
                    else { target.classList.remove('is-visible'); if (isAboveViewport) { target.classList.add('is-above'); } else { target.classList.remove('is-above'); } }
                });
            }, { threshold: 0, rootMargin: "-50px 0px -50px 0px" });
        }

        function initParagraphObservers() {
            if (paragraphObserver) paragraphObserver.disconnect();
            paragraphObserver = createFloatingObserver();
            document.querySelectorAll(".detail-content p, .detail-content li, .detail-content div.embedded-video, .detail-content p > img, #related-posts .item-card").forEach(el => {
                const targetEl = el.tagName === 'IMG' ? el.parentElement : el;
                if (!targetEl.classList.contains('floating-item')) { targetEl.classList.add('floating-item'); }
                paragraphObserver.observe(targetEl);
            });
        }

        function initFloatingObservers() {
            if (floatingObserver) floatingObserver.disconnect();
            floatingObserver = createFloatingObserver();
            document.querySelectorAll(".item-grid .item-card.floating-item").forEach(el => { floatingObserver.observe(el); });
        }

        function initHomePageObservers() {
            if (homePageObserver) homePageObserver.disconnect();
            
            homePageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const animatedElements = entry.target.id === 'hero' 
                        ? entry.target.querySelectorAll('h1, .hero-subtitle-container')
                        : entry.target.querySelectorAll('.animated-container');

                    if (entry.isIntersecting) {
                        animatedElements.forEach((el, index) => {
                            const delay = entry.target.id === 'hero' ? 0.3 + index * 0.2 : 0;
                            el.style.animationDelay = `${delay}s`;
                            el.classList.add('fade-in-up');
                        });
                    } else {
                        animatedElements.forEach(el => {
                            el.classList.remove('fade-in-up');
                            el.style.animationDelay = '';
                        });
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('#hero, #services, #portfolio, #blog, #contact, #related-posts').forEach(section => {
                if(section) homePageObserver.observe(section);
            });
        }

        async function handleAdminLogin() { if (auth.currentUser) { document.getElementById('admin-panel').classList.add('active'); return; } const email = prompt("Enter admin email:"); if (!email) return; const password = prompt("Enter admin password:"); if (!password) return; try { await signInWithEmailAndPassword(auth, email, password); document.getElementById('admin-panel').classList.add('active'); } catch (error) { console.error("Admin login failed:", error.message); alert("Login failed. Please check your email and password."); } }
        function handleNavigation(e) { const link = e.target.closest('a'); if (!link || link.target === '_blank' || link.protocol !== window.location.protocol || link.host !== window.location.host || e.metaKey || e.ctrlKey || e.shiftKey) { return; } const linkUrl = new URL(link.href); const isAnchorLink = !!linkUrl.hash; if (isAnchorLink) { e.preventDefault(); const targetPath = linkUrl.pathname.replace(/\/$/, ""); const currentPath = window.location.pathname.replace(/\/$/, ""); const targetElementId = linkUrl.hash.substring(1); const scrollToElement = () => { const element = document.getElementById(targetElementId); if (element) { setTimeout(() => { element.scrollIntoView({ behavior: 'smooth' }); }, 100); } }; if (targetPath === currentPath || (targetPath === basePath && (currentPath === basePath + '/' || currentPath === basePath))) { scrollToElement(); } else { window.history.pushState({}, '', link.href); routeAndRender(); } return; } if (linkUrl.href === window.location.href) { e.preventDefault(); return; } e.preventDefault(); window.history.pushState({}, '', linkUrl.pathname + linkUrl.search + linkUrl.hash); routeAndRender(); window.scrollTo(0, 0); };
        function initStaticEventListeners() { 
            document.body.addEventListener('click', handleNavigation); 
            window.addEventListener('popstate', routeAndRender); 
            
            // ИЗМЕНЕНИЕ: Добавляем обработчик изменения размера окна для корректировки высоты слайдеров
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    document.querySelectorAll('.cross-fade-slider').forEach(slider => {
                        const activeSlide = slider.querySelector('.item-card.active');
                        if (activeSlide) {
                           slider.style.height = `${activeSlide.offsetHeight}px`;
                        }
                    });
                }, 200);
            });

            const menuToggle = document.querySelector('.menu-toggle'); const navOverlay = document.querySelector('.nav-overlay'); menuToggle.addEventListener('click', (e) => { e.stopPropagation(); document.body.classList.toggle('nav-is-open'); menuToggle.classList.toggle('is-active'); navOverlay.classList.toggle('is-active'); }); navOverlay.addEventListener('click', (e) => { const link = e.target.closest('a'); if (link || e.target === navOverlay) { document.body.classList.remove('nav-is-open'); menuToggle.classList.remove('is-active'); navOverlay.classList.remove('is-active'); } }); document.getElementById('admin-close-btn').addEventListener('click', (e) => { e.stopPropagation(); document.getElementById('admin-panel').classList.remove('active');}); document.querySelector('.admin-content').addEventListener('click', e => { e.stopPropagation(); handleAdminActions(e); }); document.querySelector('.admin-tabs').addEventListener('click', e => { e.stopPropagation(); if (e.target.matches('.admin-tab')) { document.querySelectorAll('.admin-tab, .tab-content').forEach(el => el.classList.remove('active')); e.target.classList.add('active'); document.querySelector(`.tab-content[data-tab-content="${e.target.dataset.tab}"]`).classList.add('active'); } }); const footer = document.getElementById('site-footer'); footer.innerHTML = `© 2025 Digital Craft. All rights reserved.`; footer.addEventListener('click', handleAdminLogin); 
        }
        function applyCustomBackground(item = null) { const iframe = document.getElementById('custom-background-iframe'); const customCode = item?.backgroundHtml || siteData.home?.backgroundHtml || ''; if (customCode.trim() !== "") { iframe.style.display = 'block'; iframe.srcdoc = customCode; } else { iframe.style.display = 'none'; iframe.srcdoc = ''; } }
        
        function initApp() {
            initStaticEventListeners();
            loadData().then((freshSiteData) => {
                siteData = freshSiteData;
                renderMenu();
                routeAndRender(); 
                renderAdminPanel();
                document.getElementById('loader').classList.add('hidden');
                console.log("Data loaded from Firebase, render complete.");
            }).catch(error => {
                console.error("Failed to load initial data, showing fallback:", error);
                siteData = JSON.parse(JSON.stringify(initialSiteData));
                renderMenu();
                routeAndRender();
                renderAdminPanel();
                document.getElementById('loader').classList.add('hidden');
            });
        }

        window.addEventListener('DOMContentLoaded', initApp);
    </script>
    <script src="metrika.js" defer=""></script>

</body></html>